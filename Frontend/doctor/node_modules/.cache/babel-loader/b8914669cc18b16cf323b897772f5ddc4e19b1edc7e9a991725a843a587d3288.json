{"ast":null,"code":"var _jsxFileName = \"D:\\\\ThinkarsHub\\\\New Project OPD\\\\Fend\\\\doctor\\\\src\\\\pages\\\\PublicBooking.js\",\n  _s = $RefreshSig$();\n// ===== frontend/src/pages/PublicBooking.js =====\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { API } from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PublicBooking() {\n  _s();\n  const [doctors, setDoctors] = useState([]);\n  const [doctorId, setDoctorId] = useState('');\n  const [date, setDate] = useState('');\n  const [slots, setSlots] = useState([]);\n  const [form, setForm] = useState({\n    patientName: '',\n    patientPhone: '',\n    patientEmail: ''\n  });\n  useEffect(() => {\n    (async () => {\n      const {\n        data\n      } = await axios.get(API + '/api/doctors');\n      setDoctors(data);\n    })();\n  }, []);\n  async function loadSlots() {\n    if (!doctorId || !date) return;\n    const {\n      data\n    } = await axios.get(API + `/api/appointments/slots/${doctorId}?date=${date}`);\n    setSlots(data.slots);\n  }\n  useEffect(() => {\n    setSlots([]);\n    if (doctorId && date) loadSlots();\n  }, [doctorId, date]);\n  async function book(s) {\n    const payload = {\n      doctorId,\n      date,\n      slotStart: s.start,\n      slotEnd: s.end,\n      ...form\n    };\n    const {\n      data\n    } = await axios.post(API + '/api/public/book', payload);\n    alert('Booked! ID: ' + data._id);\n    loadSlots();\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 24,\n      display: 'grid',\n      gap: 12\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Public Appointment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Doctor\", /*#__PURE__*/_jsxDEV(\"select\", {\n        value: doctorId,\n        onChange: e => setDoctorId(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- select --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 1\n        }, this), doctors.map(d => {\n          var _d$user;\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: d._id,\n            children: [(_d$user = d.user) === null || _d$user === void 0 ? void 0 : _d$user.name, \" (\", d.specialization || 'General', \")\"]\n          }, d._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 18\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Date \", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        value: date,\n        onChange: e => setDate(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gap: 8,\n        gridTemplateColumns: 'repeat(auto-fill, minmax(140px,1fr))'\n      },\n      children: slots.map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: !s.remaining,\n        onClick: () => book(s),\n        children: [s.start, \"-\", s.end, \" (\", s.remaining, \" left)\"]\n      }, s.start, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 1\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Patient Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Full name\",\n      value: form.patientName,\n      onChange: e => setForm({\n        ...form,\n        patientName: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Phone\",\n      value: form.patientPhone,\n      onChange: e => setForm({\n        ...form,\n        patientPhone: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Email (optional)\",\n      value: form.patientEmail,\n      onChange: e => setForm({\n        ...form,\n        patientEmail: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 1\n  }, this);\n}\n_s(PublicBooking, \"rUPH2eF6WibKNTi9kqgVtHPdswM=\");\n_c = PublicBooking;\nvar _c;\n$RefreshReg$(_c, \"PublicBooking\");","map":{"version":3,"names":["React","useEffect","useState","axios","API","jsxDEV","_jsxDEV","PublicBooking","_s","doctors","setDoctors","doctorId","setDoctorId","date","setDate","slots","setSlots","form","setForm","patientName","patientPhone","patientEmail","data","get","loadSlots","book","s","payload","slotStart","start","slotEnd","end","post","alert","_id","style","padding","display","gap","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","map","d","_d$user","user","name","specialization","type","gridTemplateColumns","disabled","remaining","onClick","placeholder","_c","$RefreshReg$"],"sources":["D:/ThinkarsHub/New Project OPD/Fend/doctor/src/pages/PublicBooking.js"],"sourcesContent":["// ===== frontend/src/pages/PublicBooking.js =====\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { API } from '../api';\r\n\r\n\r\nexport default function PublicBooking(){\r\nconst [doctors,setDoctors] = useState([]);\r\nconst [doctorId,setDoctorId] = useState('');\r\nconst [date,setDate] = useState('');\r\nconst [slots,setSlots] = useState([]);\r\nconst [form,setForm] = useState({ patientName:'', patientPhone:'', patientEmail:'' });\r\n\r\n\r\nuseEffect(()=>{ (async()=>{ const {data} = await axios.get(API + '/api/doctors'); setDoctors(data); })(); },[]);\r\n\r\n\r\nasync function loadSlots(){ if(!doctorId||!date) return; const {data} = await axios.get(API + `/api/appointments/slots/${doctorId}?date=${date}`); setSlots(data.slots); }\r\nuseEffect(()=>{ setSlots([]); if(doctorId && date) loadSlots(); },[doctorId,date]);\r\n\r\n\r\nasync function book(s){\r\nconst payload = { doctorId, date, slotStart: s.start, slotEnd: s.end, ...form };\r\nconst { data } = await axios.post(API + '/api/public/book', payload);\r\nalert('Booked! ID: ' + data._id);\r\nloadSlots();\r\n}\r\n\r\n\r\nreturn (\r\n<div style={{padding:24, display:'grid', gap:12}}>\r\n<h2>Public Appointment</h2>\r\n<label>Doctor\r\n<select value={doctorId} onChange={e=>setDoctorId(e.target.value)}>\r\n<option value=\"\">-- select --</option>\r\n{doctors.map(d=> <option key={d._id} value={d._id}>{d.user?.name} ({d.specialization||'General'})</option>)}\r\n</select>\r\n</label>\r\n<label>Date <input type=\"date\" value={date} onChange={e=>setDate(e.target.value)}/></label>\r\n\r\n\r\n<div style={{display:'grid',gap:8,gridTemplateColumns:'repeat(auto-fill, minmax(140px,1fr))'}}>\r\n{slots.map(s=> (\r\n<button key={s.start} disabled={!s.remaining} onClick={()=>book(s)}>\r\n{s.start}-{s.end} ({s.remaining} left)\r\n</button>\r\n))}\r\n</div>\r\n\r\n\r\n<h3>Patient Details</h3>\r\n<input placeholder=\"Full name\" value={form.patientName} onChange={e=>setForm({...form, patientName:e.target.value})}/>\r\n<input placeholder=\"Phone\" value={form.patientPhone} onChange={e=>setForm({...form, patientPhone:e.target.value})}/>\r\n<input placeholder=\"Email (optional)\" value={form.patientEmail} onChange={e=>setForm({...form, patientEmail:e.target.value})}/>\r\n</div>\r\n);\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}